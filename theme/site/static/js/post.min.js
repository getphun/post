window.XPost={_protocol:"http",init:function(){XPost._protocol=location.protocol.replace(/:$/,""),XPost.stat.init(),XPost.embed.init()},embed:{init:function(){var t=$('[data-post="embed"],[data-post="content"]').find("iframe,.fb-video,.instagram-media,img,video");t.length&&t.each(function(t,e){var i=$(e);if(i.hasClass("fb-video"))return XPost.embed.fbvideo(i);if(i.hasClass("instagram-media"))return XPost.embed.igembed(i);var s=i.prop("tagName").toLowerCase();return"img"==s?XPost.embed.image(i):"video"==s?XPost.embed.video(i):"iframe"==s?XPost.embed.iframe(i):void 0})},general:function(t){var e=t.parent();if(!e.hasClass("embed-responsive")){var i=parseInt(t.attr("width")),s=parseInt(t.attr("height"));if(i&&s){e=$('<div style="background-color:black;width:100%;position:relative;text-align:center;"></div>'),t.css({width:"100%",height:"100%",position:"absolute",left:0,top:0});var a=s/i*100;e.css("padding-bottom",a+"%")}else e=$('<div class="embed-responsive embed-responsive-16by9"></div>');"iframe"==t.prop("tagName").toLowerCase()&&(t.attr("frameborder",0),t.removeAttr("width"),t.removeAttr("height")),t.before(e),t.appendTo(e)}},fbvideo:function(t){t.attr("class","fb-videox");var e=XPost.fb.els.length;if(XPost.fb.els.push({el:t,done:!1}),screen.width<400)return XPost.fb.init(e);var i=t.data("size");if(!i)return XPost.fb.init(e);var s=i.split("x");if(parseInt(s[0])>parseInt(s[1]))return XPost.fb.init(e);var a=$('<div style="background-color:black;text-align:center;"></div>');t.attr("data-width",320),t.before(a),t.appendTo(a),XPost.fb.init(e)},iframe:function(t){var e=t.attr("src");"http"==e.substr(0,4)&&(e=e.replace(/^https?:/,""),t.attr("src",e)),/vidio/.test(e)&&(e=e.replace(/\?.+$/,"")+"?player_only=true&autoplay=false",t.attr("src",e),t.removeAttr("width"),t.removeAttr("height"),XPost.embed.general(t));var i=e.match(/video\.php\?href=([^&]+)/);if(i){var s=decodeURIComponent(i[1]),a=(t.attr("width")||"854")+"x"+(t.attr("height")||"400"),r=$('<div class="fb-video" data-allowfullscreen="true" data-href="'+s+'" data-show-text="false" data-size="'+a+'" data-width="auto"></div>');return t.before(r),t.remove(),XPost.embed.fbvideo(r)}XPost.embed.general(t)},igembed:function(t){t.attr("class","instagram-mediax");var e=XPost.ig.els.length;if(XPost.ig.els.push({el:t,done:!1}),screen.width<400)return t.css({width:t.parent().width()}),XPost.ig.init(e);var i=$('<div style="text-align:center;"></div>');t.before(i),t.appendTo(i),t.css({display:"inline-block"}),$.ajax({url:"https://api.instagram.com/oembed/?url="+t.find("a").attr("href"),cache:!0,dataType:"jsonp",success:function(i){var s=i.thumbnail_width,a=i.thumbnail_height;s==a?t.css({width:450}):s>a?t.css({width:t.parent().width()}):t.css({width:320}),XPost.ig.init(e)}})},image:function(t){t.addClass("img-responsive");var e=t.attr("src");if("http"!=e.substr(0,4)){var i=t.parent().width();e=(e="/"+e.replace(/^[.\/]+/,"")).replace(/\.([\w]{3,4})$/,"_"+i+"x.$1"),t.attr("src",e)}},video:function(t){XPost.embed.general(t)}},fb:{els:[],init:function(t){XPost.fb.els[t].done=!0;for(e=0;e<XPost.fb.els.length;e++)if(!XPost.fb.els[e].done)return;for(var e=0;e<XPost.fb.els.length;e++){var i=XPost.fb.els[e].el.attr("class");XPost.fb.els[e].el.attr("class",i.replace(/x$/,""))}if(!$("#fbjs-sdk").get(0)){var s=$('meta[property="fb:app_id"]').prop("content")||"";$("body").append('<script src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId='+s+'" id="fbjs-sdk"><\/script>')}}},ig:{els:[],init:function(t){XPost.ig.els[t].done=!0;for(e=0;e<XPost.ig.els.length;e++)if(!XPost.ig.els[e].done)return;for(var e=0;e<XPost.ig.els.length;e++){var i=XPost.ig.els[e].el.attr("class");XPost.ig.els[e].el.attr("class",i.replace(/x$/,""))}if(!$("#igjs-embed").get(0))return $("body").append('<script id="igjs-embed" async defer src="//platform.instagram.com/en_US/embeds.js"><\/script>');var s=function(){if(!window.instgrm)return setTimeout(s,500);instgrm.Embeds.process()};setTimeout(s,100)}},stat:{init:function(){var t=sessionStorage.getItem("p"+POST.id);POST.id&&!t&&(sessionStorage.setItem("p"+POST.id,"1"),$.get(POST.stat,{id:POST.id,action:"view"}))}}},XPost.init();