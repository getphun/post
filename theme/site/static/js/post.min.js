window.XPost={content:function(){var e=$('[data-post="content"]');e.get(0)&&(e.find("img").each(function(t,i){XPost.fixImage($(i),e.width())}),e.find("iframe").each(function(e,t){XPost.fixEmbed($(t))}))},coverEmbed:function(){var e=$('[data-post="embed"]');if(e.get(0))for(var t=[".fb-video",".dailymail-video","iframe"],i=0;i<t.length;i++){var s=e.children(t[i]);s.get(0)&&XPost.fixEmbed(s)}},fixEmbed:function(e){if(!e.hasClass("leave-me-alone"))if(e.hasClass("fb-video")){if(screen.width>400){var t=e.data("size");if(t){var i=t.split("x"),s=i[0],a=i[1];if(a>s){var o=Math.round(el.width()/16*9),n=Math.round(a*s/o);e.attr("data-width",n)}}}XPost.fbjs.init()}else if("iframe"==e.prop("tagName").toLowerCase()){var d=parseInt(e.attr("width")),r=parseInt(e.attr("height")),c=e.attr("src");e.removeAttr("width"),e.removeAttr("height");var f=$("<div></div>");if(/youtube|youtu\.be/.test(c))f.addClass("embed-responsive embed-responsive-16by9");else if(d&&r){e.css({width:"100%",height:"100%",position:"absolute",left:0,top:0}),f.css({position:"relative",width:"100%"});var p=r/d*100;f.css("padding-bottom",p+"%")}else f.addClass("embed-responsive embed-responsive-16by9");e.before(f),f.append(e)}},fixImage:function(e,t){e.addClass("img-responsive");var i=$img.attr("src");"http"!=i.substr(0,4)&&(newsize="_"+t+"x",i=i.replace(/\.([a-zA-Z]+)$/,newsize+".$1"),$img.attr("src",i))},init:function(){XPost.stat(),XPost.coverEmbed(),XPost.content()},stat:function(){var e=sessionStorage.getItem("p"+POST.id);POST.id&&!e&&(sessionStorage.setItem("p"+POST.id,"1"),$.get(POST.stat,{id:POST.id,action:"view"}))},fbjs:{included:!1,init:function(){if(!XPost.fbjs.included&&(XPost.fbjs.included=!0,!$("#fbjs-sdk").get(0))){var e=$('meta[property="fb:app_id"]').prop("content")||"";$("body").append('<script src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId='+e+'"><\/script>')}}},igjs:{included:!1,init:function(){XPost.igjs.included,XPost.igjs.included=!0,$("#igjs-embed").get(0)||$("body").append('<script id="igjs-embed" async defer src="//platform.instagram.com/en_US/embeds.js"><\/script>')}}},XPost.init();