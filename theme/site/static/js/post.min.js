window.XPost={_protocol:"http",init:function(){XPost._protocol=location.protocol.replace(/:$/,""),XPost.stat.init(),XPost.embed.init()},embed:{init:function(){var t=[".fb-post",".fb-video",".g-post",".instagram-media",".twitter-tweet","iframe","img","video"].join(","),e=$('[data-post="embed"],[data-post="content"]').find(t);e.length&&e.each(function(t,e){var s=$(e);if(s.hasClass("fb-post"))return XPost.embed.fbpost(s);if(s.hasClass("fb-video"))return XPost.embed.fbvideo(s);if(s.hasClass("g-post"))return XPost.embed.gpembed(s);if(s.hasClass("instagram-media"))return XPost.embed.igembed(s);if(s.hasClass("twitter-tweet"))return XPost.embed.twembed(s);var o=s.prop("tagName").toLowerCase();return"img"==o?XPost.embed.image(s):"video"==o?XPost.embed.video(s):"iframe"==o?XPost.embed.iframe(s):void 0})},general:function(t){var e=t.parent();if(!e.hasClass("embed-responsive")){var s=parseInt(t.attr("width")),o=parseInt(t.attr("height"));if(s&&o){e=$('<div style="background-color:black;width:100%;position:relative;text-align:center;"></div>'),t.css({width:"100%",height:"100%",position:"absolute",left:0,top:0});var r=o/s*100;e.css("padding-bottom",r+"%")}else e=$('<div class="embed-responsive embed-responsive-16by9"></div>');"iframe"==t.prop("tagName").toLowerCase()&&(t.attr("frameborder",0),t.removeAttr("width"),t.removeAttr("height")),t.before(e),t.appendTo(e)}},fbvideo:function(t){t.attr("class","fb-videox");var e=XPost.fb.els.length;if(XPost.fb.els.push({el:t,done:!1}),screen.width<400)return XPost.fb.init(e);var s=t.data("size");if(!s)return XPost.fb.init(e);var o=s.split("x");if(parseInt(o[0])>parseInt(o[1]))return XPost.fb.init(e);var r=$('<div style="background-color:black;text-align:center;"></div>');t.attr("data-width",320),t.before(r),t.appendTo(r),XPost.fb.init(e)},fbpost:function(t){t.attr("class","fb-postx");var e=XPost.fb.els.length;return XPost.fb.els.push({el:t,done:!1}),XPost.fb.init(e)},gpembed:function(t){t.attr("class","g-postx");var e=XPost.gp.els.length;return XPost.gp.els.push({el:t,done:!1}),XPost.gp.init(e)},iframe:function(t){var e=t.attr("src");"http"==e.substr(0,4)&&(e=e.replace(/^https?:/,""),t.attr("src",e)),/youtu\.?be/.test(e)?(t.removeAttr("width"),t.removeAttr("height")):/vidio/.test(e)&&(e=e.replace(/\?.+$/,"")+"?player_only=true&autoplay=false",t.attr("src",e),t.removeAttr("width"),t.removeAttr("height"),XPost.embed.general(t));var s=e.match(/instagram\.com\/p\/([^\/]+)/);if(s){var o=location.protocol+"//www.instagram.com/p/"+s[1]+"/",r=$('<blockquote class="instagram-media" data-instgrm-captioned data-instgrm-version="7"><a href="'+o+'" target="_blank"></a></blockquote>');return t.before(r),t.remove(),XPost.embed.igembed(r)}if(s=e.match(/video\.php\?href=([^&]+)/)){var o=decodeURIComponent(s[1]),a=(t.attr("width")||"854")+"x"+(t.attr("height")||"400"),r=$('<div class="fb-video" data-allowfullscreen="true" data-href="'+o+'" data-show-text="false" data-size="'+a+'" data-width="auto"></div>');return t.before(r),t.remove(),XPost.embed.fbvideo(r)}if(s=e.match(/post\.php\?href=([^&]+)/)){var o=decodeURIComponent(s[1]),r=$('<div class="fb-post" data-href="'+o+'" data-show-text="true" data-width="auto"></div>');return t.before(r),t.remove(),XPost.embed.fbpost(r)}XPost.embed.general(t)},igembed:function(t){t.attr("class","instagram-mediax");var e=XPost.ig.els.length;if(XPost.ig.els.push({el:t,done:!1}),screen.width<400)return t.css({width:t.parent().width()}),XPost.ig.init(e);var s=$('<div style="text-align:center;"></div>');t.before(s),t.appendTo(s),t.css({display:"inline-block"}),$.ajax({url:"https://api.instagram.com/oembed/?url="+t.find("a").attr("href"),cache:!0,dataType:"jsonp",success:function(s){var o=s.thumbnail_width,r=s.thumbnail_height;o==r?t.css({width:450}):o>r?t.css({width:t.parent().width()}):t.css({width:320}),XPost.ig.init(e)}})},image:function(t){t.addClass("img-responsive");var e=t.attr("src");if("http"!=e.substr(0,4)){var s=t.parent().width();e=(e="/"+e.replace(/^[.\/]+/,"")).replace(/\.([\w]{3,4})$/,"_"+s+"x.$1"),t.attr("src",e)}},twembed:function(t){t.attr("class","twitter-tweetx");var e=XPost.tw.els.length;XPost.tw.els.push({el:t,done:!1}),XPost.tw.init(e)},video:function(t){XPost.embed.general(t)}},fb:{els:[],init:function(t){XPost.fb.els[t].done=!0;for(e=0;e<XPost.fb.els.length;e++)if(!XPost.fb.els[e].done)return;for(var e=0;e<XPost.fb.els.length;e++){var s=XPost.fb.els[e].el.attr("class");XPost.fb.els[e].el.attr("class",s.replace(/x$/,""))}if(!$("#fbjs-sdk").get(0)){var o=$('meta[property="fb:app_id"]').prop("content")||"";$("body").append('<script id="fbjs-sdk" src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId='+o+'"><\/script>')}}},gp:{els:[],init:function(t){XPost.gp.els[t].done=!0;for(e=0;e<XPost.gp.els.length;e++)if(!XPost.gp.els[e].done)return;for(var e=0;e<XPost.gp.els.length;e++){var s=XPost.gp.els[e].el.attr("class");XPost.gp.els[e].el.attr("class",s.replace(/x$/,""))}$("#google-sdk").get(0)||$("body").append('<script id="google-sdk" src="//apis.google.com/js/platform.js" async defer><\/script>')}},ig:{els:[],init:function(t){XPost.ig.els[t].done=!0;for(e=0;e<XPost.ig.els.length;e++)if(!XPost.ig.els[e].done)return;for(var e=0;e<XPost.ig.els.length;e++){var s=XPost.ig.els[e].el.attr("class");XPost.ig.els[e].el.attr("class",s.replace(/x$/,""))}if(!$("#igjs-embed").get(0))return $("body").append('<script id="igjs-embed" src="//platform.instagram.com/en_US/embeds.js" async defer><\/script>');var o=function(){if(!window.instgrm)return setTimeout(o,500);instgrm.Embeds.process()};setTimeout(o,100)}},tw:{els:[],init:function(t){XPost.tw.els[t].done=!0;for(e=0;e<XPost.tw.els.length;e++)if(!XPost.tw.els[e].done)return;for(var e=0;e<XPost.tw.els.length;e++){var s=XPost.tw.els[e].el.attr("class");XPost.tw.els[e].el.attr("class",s.replace(/x$/,""))}if(!$("#twjs-embed").get(0))return $("body").append('<script id="twjs-embed" src="https://platform.twitter.com/widgets.js" async charset="utf-8"><\/script>')}},stat:{init:function(){var t=sessionStorage.getItem("p"+POST.id);POST.id&&!t&&(sessionStorage.setItem("p"+POST.id,"1"),$.get(POST.stat,{id:POST.id,action:"view"}))}},share:function(t){switch(t){case"facebook":e="https://www.facebook.com/sharer/sharer.php?u="+location.href;window.open(e,"facebook-share","width=580,height=296");break;case"twitter":e="https://twitter.com/share?text="+location.href;window.open(e,"twitter-share","width=550,height=235");break;case"gplus":var e="https://plus.google.com/share?url="+location.href;window.open(e,"googleplus-share","width=490,height=530")}return!1}},XPost.init();