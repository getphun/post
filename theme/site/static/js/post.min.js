window.XPost={init:function(){XPost.stat.init(),XPost.embed.init()},embed:{init:function(){var e=$('[data-post="embed"],[data-post="content"]').find("iframe,.fb-video,.instagram-media,img,video");e.length&&e.each(function(e,t){var i=$(t);if(i.hasClass("fb-video"))return XPost.embed.fbvideo(i);if(i.hasClass("instagram-media"))return XPost.embed.igembed(i);var s=i.prop("tagName").toLowerCase();return"img"==s?XPost.embed.image(i):"video"==s?XPost.embed.video(i):"iframe"==s?XPost.embed.iframe(i):void 0})},general:function(e){var t=e.parent();if(!t.hasClass("embed-responsive")){var i=parseInt(e.attr("width")),s=parseInt(e.attr("height"));if(i&&s){t=$('<div style="background-color:black;width:100%;position:relative;text-align:center;"></div>'),e.css({width:"100%",height:"100%",position:"absolute",left:0,top:0});var a=s/i*100;t.css("padding-bottom",a+"%")}else t=$('<div class="embed-responsive embed-responsive-16by9"></div>');"iframe"==e.prop("tagName").toLowerCase()&&(e.attr("frameborder",0),e.removeAttr("width"),e.removeAttr("height")),e.before(t),e.appendTo(t)}},fbvideo:function(e){e.attr("class","fb-videox");var t=XPost.fb.els.length;if(XPost.fb.els.push({el:e,done:!1}),screen.width<400)return XPost.fb.init(t);var i=e.data("size");if(!i)return XPost.fb.init(t);var s=i.split("x");if(parseInt(s[0])>parseInt(s[1]))return XPost.fb.init(t);var a=$('<div style="background-color:black;text-align:center;"></div>');e.attr("data-width",320),e.before(a),e.appendTo(a),XPost.fb.init(t)},iframe:function(e){var t=e.attr("src");/vidio/.test(t)&&(t=t.replace(/\?.+$/,"")+"?player_only=true&autoplay=false",e.attr("src",t),e.removeAttr("width"),e.removeAttr("height"),XPost.embed.general(e));var i=t.match(/video\.php\?href=([^&]+)/);if(i){var s=decodeURIComponent(i[1]),a=(e.attr("width")||"854")+"x"+(e.attr("height")||"400"),r=$('<div class="fb-video" data-allowfullscreen="true" data-href="'+s+'" data-show-text="false" data-size="'+a+'" data-width="auto"></div>');return e.before(r),e.remove(),XPost.embed.fbvideo(r)}XPost.embed.general(e)},igembed:function(e){e.attr("class","instagram-mediax");var t=XPost.ig.els.length;if(XPost.ig.els.push({el:e,done:!1}),screen.width<400)return e.css({width:e.parent().width()}),XPost.ig.init(t);var i=$('<div style="text-align:center;"></div>');e.before(i),e.appendTo(i),e.css({display:"inline-block"}),$.ajax({url:"https://api.instagram.com/oembed/?url="+e.find("a").attr("href"),cache:!0,dataType:"jsonp",success:function(i){var s=i.thumbnail_width,a=i.thumbnail_height;s==a?e.css({width:450}):s>a?e.css({width:e.parent().width()}):e.css({width:320}),XPost.ig.init(t)}})},image:function(e){e.addClass("img-responsive");var t=e.attr("src");if("http"!=t.substr(0,4)){var i=e.parent().width();t=(t="/"+t.replace(/^[.\/]+/,"")).replace(/\.([\w]{3,4})$/,"_"+i+"x.$1"),e.attr("src",t)}},video:function(e){XPost.embed.general(e)}},fb:{els:[],init:function(e){XPost.fb.els[e].done=!0;for(t=0;t<XPost.fb.els.length;t++)if(!XPost.fb.els[t].done)return;for(var t=0;t<XPost.fb.els.length;t++){var i=XPost.fb.els[t].el.attr("class");XPost.fb.els[t].el.attr("class",i.replace(/x$/,""))}if(!$("#fbjs-sdk").get(0)){var s=$('meta[property="fb:app_id"]').prop("content")||"";$("body").append('<script src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId='+s+'" id="fbjs-sdk"><\/script>')}}},ig:{els:[],init:function(e){XPost.ig.els[e].done=!0;for(t=0;t<XPost.ig.els.length;t++)if(!XPost.ig.els[t].done)return;for(var t=0;t<XPost.ig.els.length;t++){var i=XPost.ig.els[t].el.attr("class");XPost.ig.els[t].el.attr("class",i.replace(/x$/,""))}if(!$("#igjs-embed").get(0))return $("body").append('<script id="igjs-embed" async defer src="//platform.instagram.com/en_US/embeds.js"><\/script>');var s=function(){if(!window.instgrm)return setTimeout(s,500);instgrm.Embeds.process()};setTimeout(s,100)}},stat:{init:function(){var e=sessionStorage.getItem("p"+POST.id);POST.id&&!e&&(sessionStorage.setItem("p"+POST.id,"1"),$.get(POST.stat,{id:POST.id,action:"view"}))}}},XPost.init();